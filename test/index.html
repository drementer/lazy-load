<!DOCTYPE html>
<html lang="tr-TR">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Lazy Load Test</title>

	<style>
		figure,
		video{
			display: block;
			width: 400px;
			margin: 100px auto;
		}
		figcaption{
			margin-top: 10px;
		}
		img{
			display: block;
			width: 400px;
			height: 400px;
			position: relative;
			border-radius: 10px;
		}
		img::after{
			content: "";
			background-color: #e4e4e4;
			width: 100%;
			height: 100%;
			position: absolute;
			inset: 0;
		}
	</style>
</head>
<body>
	
	<!-- Main -->
	<main>

		<!-- Section -->
		<section>

			<!-- 
				Görseller için kalıp 
				
				Bana kolaylık olsun diye javascript ile çoğaltım
			-->
			<template>

				<!-- Lazy Load Eleman -->
				<figure>

					<!-- 
						Görsel 

						lazy-load attr'sini bana kolaylık olması için
						javascript ile otomatik doldurdum

						Ama normalde siz ister URL ister görselin dosya
						yolunu kullanabilirsiniz
					-->
					<img 
						lazy-load="URL/görsel yolu" 
						alt="Rastgele görsel"
					>

					<!-- Başlık -->
					<figcaption>
						In irure eu est veniam officia laborum esse id 
						sit tempor minim amet excepteur ea.
					</figcaption>
				</figure><!-- Lazy Load Eleman SON -->
			</template><!-- Kalıp SON -->

			<!-- 
				Videolar için kalıp
			-->
			<template>
				<!-- Lazy Load Eleman -->
				<video lazy-load="video.mp4" controls></video>
				<!-- Lazy Load Eleman SON -->
			</template><!-- Kalıp SON -->

		</section><!-- Section SON -->
	</main><!-- Main SON -->

	<!-- Lazy Load eleman çoğaltıcı -->
	<script type="text/javascript">
		// Atamalar
		const template = document.querySelectorAll("template"),
			section = document.querySelector("section");

		// İşlev
		template.forEach((temp) => {
			for(let i = 0; i < 10; i++){
				section.appendChild(temp.content.cloneNode(true));
			}
		});
	</script>

	<!-- Rastgele fotoğraf oluşturucu -->
	<script type="text/javascript">

		// Tüm img elemanları seçiliyor
		const gorseller = document.querySelectorAll("img");

		/* 
			Basit bir döngü ile tüm img elemanlarının lazy-load attr'sine 
			rastgele görsel url'si ekleniyor 
		*/
		gorseller.forEach((gorsel, i) => {
			gorsel.setAttribute(
				"lazy-load",
				`http://unsplash.it/400/400?random=${i}&gravity=center`
			);
		});
	</script>

	<!-- Lazy Load -->
	<script src="lazy-load.js"></script>
</body>
</html>