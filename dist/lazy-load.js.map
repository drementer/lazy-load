{"mappings":"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","sources":["src/app.js","src/utils/defaultOptions.js","src/helpers/assetLoader.js","src/helpers/states.js","src/utils/settings.js","src/helpers/checkSupport.js","src/helpers/observer.js","src/helpers/getElements.js"],"sourcesContent":["/**\n * Lazy-load.js\n *\n * @author drementer\n * @module lazyLoad\n * @version 1.0.7\n * @license MIT\n * @see {@link https://github.com/drementer/lazy-load.js}\n */\n\nimport defaultOptions from './utils/defaultOptions.js';\nimport loadAsset from './helpers/assetLoader.js';\nimport states from './helpers/states.js';\nimport checkSupport from './helpers/checkSupport.js';\nimport observer from './helpers/observer.js';\nimport getElements from './helpers/getElements.js';\n\nexport default (selector, customOptions = {}) => {\n  const options = { ...defaultOptions, ...customOptions };\n\n  const observerCallback = (target) => {\n    states.loading(target, options);\n    loadAsset(target, options);\n  };\n\n  const processLazyItem = (item) => {\n    try {\n      states.waiting(item, options);\n\n      checkSupport(item);\n      observer(item, observerCallback, options.observer);\n    } catch (error) {\n      states.error(item, options, error.message);\n    }\n  };\n\n  try {\n    const lazyItems = getElements(selector);\n    if (!lazyItems.length) throw new Error('No lazy loadable element found!');\n\n    lazyItems.forEach(processLazyItem);\n  } catch (error) {\n    console.error('Lazy error:', error.message);\n  }\n};\n","/**\n * Default options for the lazy loading functionality.\n *\n * @module defaultOptions\n *\n * @property {Object} attrs - The attributes to be used for lazy loading.\n * @property {string} attrs.src - The attribute for the source of the media.\n * @property {string} attrs.srcset - The attribute for the source set of the media.\n * @property {string} attrs.poster - The attribute for the poster of the media.\n *\n * @property {Object} observer - The options for the Intersection Observer.\n * @property {Element} observer.root - The root element for the Intersection Observer.\n * @property {number} observer.threshold - The threshold for the Intersection Observer.\n * @property {string} observer.rootMargin - The root margin for the Intersection Observer.\n *\n * @property {Function} onLoaded - The callback to be executed when the media is loaded.\n * @property {Function} onLoading - The callback to be executed when the media is loading.\n * @property {Function} onError - The callback to be executed when there is an error loading the media.\n */\nexport default {\n  attrs: {\n    src: 'lazy',\n    srcset: 'lazy-srcset',\n    poster: 'lazy-poster',\n  },\n  observer: {\n    root: null,\n    threshold: 1,\n    rootMargin: '100% 0px',\n  },\n  onLoaded: () => {},\n  onLoading: () => {},\n  onError: (element, error) => console.error('Error on:', element, error),\n};\n","/**\n * Set attributes on the given HTML element based on the provided options.\n *\n * @module assetLoader\n *\n * @param {HTMLElement} element - The HTML element to set attributes on.\n * @param {Object} options - Options for attribute names.\n */\nexport default (element, options) => {\n  const attributes = Object.entries(options.attrs);\n\n  const loadAttr = ([assetAttr, lazyAttr]) => {\n    const assetPath = element.getAttribute(lazyAttr);\n    if (assetPath) element.setAttribute(assetAttr, assetPath);\n  };\n\n  attributes.forEach(loadAttr);\n};\n","import settings from '../utils/settings.js';\n\n/**\n * Object managing different states.\n *\n * @module states\n *\n * @property {function} setWaitingState - Function handling waiting state operations.\n * @property {function} setLoadingState - Function handling loading state operations.\n * @property {function} setLoadedState - Function handling loaded state operations.\n * @property {function} setErrorState - Function handling error state operations.\n */\nconst states = {\n  setWaiting: (element) => {\n    element.setAttribute(settings.stateAttr, settings.states.waiting);\n  },\n\n  setLoading: (element, options) => {\n    element.setAttribute(settings.stateAttr, settings.states.loading);\n    options.onLoading(element);\n  },\n\n  setLoaded: (element, options) => {\n    const assetAttr = Object.entries(options.attrs);\n\n    console.log('ðŸ“Œ ~ assetAttr ->', assetAttr)\n\n\n    element.setAttribute(settings.stateAttr, settings.states.loaded);\n    assetAttr.forEach(([attr]) => element.removeAttribute(attr));\n    options.onLoaded(element);\n  },\n\n  setError: (element, options, error) => {\n    element.setAttribute(settings.stateAttr, settings.states.error);\n\n    options.onError(element, error);\n  },\n};\n\nexport default states;\n","/**\n * Default settings for the lazy loading functionality.\n *\n * @module settings\n *\n * @property {string} stateAttr - The attribute to store the state of the lazy loading process.\n * @property {Object} states - The possible states of the lazy loading process.\n * @property {string} states.waiting - The state when the element is waiting to be loaded.\n * @property {string} states.loading - The state when the element is currently loading.\n * @property {string} states.loaded - The state when the element has finished loading.\n * @property {string} states.error - The state when there was an error loading the element.\n * @property {Array.<string>} supportedElements - The types of elements that are supported for lazy loading.\n */\nexport default {\n  stateAttr: 'lazy-state',\n  supportedElements: ['img', 'video', 'embed', 'object'],\n  states: {\n    waiting: 'waiting',\n    loading: 'loading',\n    loaded: 'loaded',\n    error: 'error',\n  },\n};\n","import settings from '../utils/settings.js';\n\n/**\n * Checks if the given HTML element is of a supported type.\n *\n * @module checkSupport\n *\n * @param {HTMLElement} element - The HTML element to be checked.\n * @throws {Error} Throws an error if the element type is not supported.\n * @returns {boolean} Returns true if the element type is supported.\n */\nexport default (element) => {\n  const elementType = element.tagName.toLowerCase();\n  const isSupported = settings.supportedElements.includes(elementType);\n\n  if (isSupported) return true;\n\n  throw new Error(`Element type ${elementType} is not supported!`);\n};\n","/**\n * Creates an Intersection Observer and starts observing the given item.\n *\n * @module observer\n *\n * @param {Element} item - The DOM element to be observed.\n * @param {Function} callback - The function to be called when the item is intersecting.\n * @param {Object} settings - The options for the Intersection Observer.\n */\nexport default (item, callback, settings) => {\n  const handleIntersection = (entries, observer) => {\n    entries.forEach((entry) => {\n      if (!entry.isIntersecting) return;\n\n      callback(entry.target);\n      observer.unobserve(entry.target);\n    });\n  };\n\n  const observer = new IntersectionObserver(handleIntersection, settings);\n\n  observer.observe(item);\n};\n","/**\n * Select elements based on a given selector within a specified root element.\n *\n * @module getElements\n *\n * @param {string | Element | NodeList | Array} selector - The selector to match elements.\n * @returns {NodeList} - The NodeList containing the selected elements.\n */\nexport default (selector) => {\n  if (selector instanceof Element) return [selector];\n  if (selector instanceof NodeList) return selector;\n  if (selector instanceof Array) return selector;\n\n  return document.querySelectorAll(selector);\n};\n"],"names":[],"version":3,"file":"lazy-load.js.map","sourceRoot":"../"}